{% extends "base.html" %}
{% block title %}TaskeMate|Home{% endblock %}
{% block extra_head %}
<style>
  .container-wrapper {
      display: flex;
      gap: 30px;
      flex-grow: 1;
      padding: 40px 20px;
    }

    button {
      margin-top: 20px;
    }

    .container {
      background: #2c2f4a;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.6);
      color: #fff;
    }

    .form-container {
      flex: 1;
      max-width: 350px;
    }

    .table-container {
      flex: 3;
      overflow-x: auto;
    }

    h1 {
      font-weight: 900;
      font-size: 2rem;
      margin-bottom: 20px;
      text-align: center;
    }

    input[type="text"],
    input[type="date"] {
      width: 100%;
      padding: 12px;
      border-radius: 6px;
      border: none;
      font-size: 1rem;
      outline: none;
      color: #000;
    }

    button {
      width: 100%;
      padding: 14px;
      background: #764ba2;
      border: none;
      border-radius: 8px;
      color: #fff;
      font-weight: bold;
      font-size: 1.1rem;
      cursor: pointer;
    }
    .pagination .page-item.active .page-link {
      background-color: #764ba2 !important;
      border-color: #764ba2 !important;
      color: #fff !important;
      box-shadow: none !important;
    }

.btn-outline-light {
  border-radius: 8px;
  border: 2px solid #a58efb;
  color: #fff;
  background-color: transparent;
  transition: 0.3s ease;
}

.btn-check:checked + .btn-outline-light,
.btn-outline-light:hover {
  background-color: #764ba2;
  border-color:;
  color: #fff;
}
</style> 
  {% endblock %}
  {% block content %}
<div class="text-center mt-4" style="font-size: 1.3rem; color: #e2e8f0;">
    
  {% if user.is_authenticated %}
    Hello, <strong>{{ user.username }}</strong>
    <p>Get ready to enhance your productivity and achieve deadlines effectively.</p>
    {% else %}
    Hello,<strong> user</strong>
    <p>Get ready to enhance your productivity and achieve deadlines effectively.</p>
    <p>Please login to save your progress and modify the task list or to customize the tasks</p>
    {% endif %}
  </div>

  <div class="container-wrapper">
    <!-- Form Container -->
    <div class="container form-container">
  <h1>Add New Task</h1>
  <form method="POST">
    {% csrf_token %}

    
    <label for="task">Task</label>
    <input type="text" id="task" name="task" placeholder="Enter task here" required>

    <label for="deadline">Deadline</label>
    <input type="date" id="deadline" name="deadline">

    <button type="submit">Add Task</button>
  </form>
</div>


    <!-- Table Container -->
    <div class="container table-container">
      <h1>üìù My To-Do List</h1>
      <div class="table-responsive">
        <table class="table table-bordered table-hover shadow-sm">
          <thead class="table-dark">
            <tr>
              <th>#</th>
              <th>Task</th>
              <th>Deadline</th>
              <th>Status</th>
              <th>Edit/Delete</th>
              <th>Mark</th>
            </tr>
          </thead>
          <tbody>
            {% for obj in two_task %}
            <tr class="{% if obj.done %}table-success{% endif %}">
              <td>{{ forloop.counter|add:two_task.start_index|add:"-1" }}</td>
              <td>{% if obj.done %}<del>{{ obj.tasks }}</del>{% else %}{{ obj.tasks }}{% endif %}</td>
              <td>{% if obj.deadline %}{{ obj.deadline }}{% else %}<em>No deadline</em>{% endif %}</td>
              <td>{% if obj.done %}<span class="badge bg-success">‚úîÔ∏è Completed</span>{% else %}<span class="badge bg-danger">‚ùå Pending</span>{% endif %}</td>
              <td>
                <a href="{% url 'edit' obj.id %}" class="btn btn-sm btn-primary">‚úèÔ∏è Edit</a>
                <a href="{% url 'delete' obj.id %}" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this task?');">üóëÔ∏è Delete</a>
              </td>
              <td>
                {% if obj.done %}
                <a href="{% url 'status' obj.id %}" class="btn btn-sm btn-warning text-dark custom-orange">Mark as undone</a>
                {% else %}
                <a href="{% url 'status' obj.id %}" class="btn btn-sm btn-warning text-dark custom-orange">Mark as done</a>
                {% endif %}
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="5" class="text-center">No tasks available.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="my-3 ps-4">
    <nav>
      <ul class="pagination d-flex justify-content-end">
        {% if two_task.has_previous %}
        <li class="page-item">
          <a class="page-link bg-dark text-white border-secondary" href="?page=1">&laquo; First</a>
        </li>
        <li class="page-item">
          <a class="page-link bg-dark text-white border-secondary" href="?page={{ two_task.previous_page_number }}">Previous</a>
        </li>
        {% else %}
        <li class="page-item disabled">
          <span class="page-link bg-secondary text-white border-secondary">&laquo; First</span>
        </li>
        <li class="page-item disabled">
          <span class="page-link bg-secondary text-white border-secondary">Previous</span>
        </li>
        {% endif %}

        {% for num in two_task.paginator.page_range %}
        {% if num == two_task.number %}
        <li class="page-item active" aria-current="page">
          <span class="page-link bg-primary border-0">{{ num }}</span>
        </li>
        {% elif num >= two_task.number|add:"-2" and num <= two_task.number|add:"2" %}
        <li class="page-item">
          <a class="page-link bg-dark text-white border-secondary" href="?page={{ num }}">{{ num }}</a>
        </li>
        {% elif num == 1 or num == two_task.paginator.num_pages %}
        <li class="page-item">
          <a class="page-link bg-dark text-white border-secondary" href="?page={{ num }}">{{ num }}</a>
        </li>
        {% elif num == two_task.number|add:"-3" or num == two_task.number|add:"3" %}
        <li class="page-item disabled">
          <span class="page-link bg-dark text-white border-secondary">‚Ä¶</span>
        </li>
        {% endif %}
        {% endfor %}

        {% if two_task.has_next %}
        <li class="page-item">
          <a class="page-link bg-dark text-white border-secondary" href="?page={{ two_task.next_page_number }}">Next</a>
        </li>
        <li class="page-item">
          <a class="page-link bg-dark text-white border-secondary" href="?page={{ two_task.paginator.num_pages }}">Last &raquo;</a>
        </li>
        {% else %}
        <li class="page-item disabled">
          <span class="page-link bg-secondary text-white border-secondary">Next</span>
        </li>
        <li class="page-item disabled">
          <span class="page-link bg-secondary text-white border-secondary">Last &raquo;</span>
        </li>
        {% endif %}
      </ul>
    </nav>
  </div>
  {% endblock %}



  {% block extra_js %}
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    setTimeout(function () {
      var alert = document.querySelector('.alert');
      if (alert) {
        var bsAlert = bootstrap.Alert.getOrCreateInstance(alert);
        bsAlert.close();
      }
    }, 3000);

  
</script>
{% endblock %}

